# ì±…í¬ (Cheok) - ì†¡íŒŒêµ¬ ë„ì„œê´€ í†µí•© ê²€ìƒ‰ ì„œë¹„ìŠ¤

## í”„ë¡œì íŠ¸ ê°œìš”

**ì„œë¹„ìŠ¤ëª…**: ì±…í¬ (ì†¡íŒŒêµ¬ ë„ì„œê´€ ì±…í¬)  
**ëª©ì **: ì†¡íŒŒêµ¬ ë‚´ 24ê°œ ë„ì„œê´€ì˜ ë„ì„œ ì†Œì¥ ë° ëŒ€ì¶œ ê°€ëŠ¥ ì—¬ë¶€ë¥¼ í•œ ë²ˆì— ê²€ìƒ‰í•˜ëŠ” í†µí•© ì„œë¹„ìŠ¤  
**ë°°í¬ í™˜ê²½**: Vercel Serverless  
**íƒ€ê²Ÿ ì‚¬ìš©ì**: ëª¨ë“  ì—°ë ¹ëŒ€ (íŠ¹íˆ ì–´ë¦°ì´ë¶€í„° ë…¸ë…„ì¸µê¹Œì§€)

### í•µì‹¬ ê°€ì¹˜
- **ì ‘ê·¼ì„± ìš°ì„  (Accessibility First)**: ëª¨ë“  ì—°ë ¹ëŒ€ê°€ ì‰½ê²Œ ì‚¬ìš© ê°€ëŠ¥
- **í¸ë¦¬í•¨**: ì—¬ëŸ¬ ë„ì„œê´€ì„ í•œ ë²ˆì— ê²€ìƒ‰
- **ì‹ ì†í•¨**: ì‹¤ì‹œê°„ ëŒ€ì¶œ ê°€ëŠ¥ ì—¬ë¶€ í™•ì¸
- **ì¹œê·¼í•¨**: ìì—° ì¹œí™”ì  ë””ìì¸ (ì†Œë‚˜ë¬´ ëª¨í‹°ë¸Œ, ì´ˆë¡ìƒ‰)

---

## ê¸°ìˆ  ìŠ¤íƒ (2026ë…„ 1ì›” ê¸°ì¤€)

### í•„ìˆ˜ ë²„ì „
```json
{
  "next": "15.5.9",
  "react": "19.2.2",
  "react-dom": "19.2.2",
  "typescript": "5.7.2",
  "tailwindcss": "4.1.18",
  "@tanstack/react-query": "^5.80.2",
  "cheerio": "^1.1.2",
  "@upstash/redis": "^1.38.0"
}
```

### âš ï¸ ë³´ì•ˆ í•„ìˆ˜ì‚¬í•­
- **CVE-2025-55182 (React2Shell)**: React 19.0.1+, 19.1.2+, 19.2.1+ íŒ¨ì¹˜ëœ ë²„ì „ í•„ìˆ˜
- Next.js 15.0.5+, 15.1.9+, 15.2.6+ íŒ¨ì¹˜ëœ ë²„ì „ í•„ìˆ˜
- ì˜ì¡´ì„± ê°ì‚¬ ë„êµ¬ ì •ê¸° ì‹¤í–‰ (npm audit, Dependabot)

---

## í”„ë¡œì íŠ¸ êµ¬ì¡°

```
cheok/
â”œâ”€â”€ app/                          # Next.js App Router
â”‚   â”œâ”€â”€ (main)/                   # ë©”ì¸ ë¼ìš°íŠ¸ ê·¸ë£¹
â”‚   â”‚   â”œâ”€â”€ page.tsx              # ê²€ìƒ‰ í™”ë©´ (/)
â”‚   â”‚   â”œâ”€â”€ loading.tsx
â”‚   â”‚   â””â”€â”€ results/
â”‚   â”‚       â”œâ”€â”€ page.tsx          # ê²€ìƒ‰ ê²°ê³¼ (/results)
â”‚   â”‚       â””â”€â”€ loading.tsx
â”‚   â”œâ”€â”€ api/                      # API Routes
â”‚   â”‚   â”œâ”€â”€ search/route.ts       # GET /api/search
â”‚   â”‚   â”œâ”€â”€ libraries/route.ts    # GET /api/libraries
â”‚   â”‚   â””â”€â”€ health/route.ts
â”‚   â”œâ”€â”€ layout.tsx                # ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ
â”‚   â”œâ”€â”€ globals.css               # Tailwind CSS
â”‚   â”œâ”€â”€ providers.tsx             # React Query Provider
â”‚   â””â”€â”€ error.tsx
â”œâ”€â”€ components/                   # ì¬ì‚¬ìš© ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ ui/                       # ê¸°ë³¸ UI (button, input, badge, card)
â”‚   â”œâ”€â”€ search/                   # ê²€ìƒ‰ ê´€ë ¨
â”‚   â”œâ”€â”€ library/                  # ë„ì„œê´€ ê´€ë ¨
â”‚   â”œâ”€â”€ book/                     # ë„ì„œ ê´€ë ¨
â”‚   â””â”€â”€ filter/                   # í•„í„°/ì •ë ¬
â”œâ”€â”€ lib/                          # ìœ í‹¸ë¦¬í‹° & ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ api/                      # API í´ë¼ì´ì–¸íŠ¸
â”‚   â”œâ”€â”€ scraper/                  # ì›¹ í¬ë¡¤ë§ (Cheerio)
â”‚   â”œâ”€â”€ cache/                    # Redis ìºì‹±
â”‚   â”œâ”€â”€ kakao/                    # ì¹´ì¹´ì˜¤ë§µ (Phase 3)
â”‚   â”œâ”€â”€ hooks/                    # ì»¤ìŠ¤í…€ í›…
â”‚   â”œâ”€â”€ utils/                    # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚   â””â”€â”€ constants/                # ìƒìˆ˜ (ë„ì„œê´€ ëª©ë¡ ë“±)
â”œâ”€â”€ types/                        # TypeScript íƒ€ì… ì •ì˜
â”‚   â”œâ”€â”€ book.ts
â”‚   â”œâ”€â”€ library.ts
â”‚   â””â”€â”€ search.ts
â””â”€â”€ public/                       # ì •ì  íŒŒì¼
    â””â”€â”€ images/
```

---

## TypeScript ê·œì¹™

### ì—„ê²© ëª¨ë“œ í•„ìˆ˜
```json
// tsconfig.json
{
  "compilerOptions": {
    "strict": true,
    "noImplicitAny": true,
    "strictNullChecks": true,
    "strictFunctionTypes": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "target": "ES2024"
  }
}
```

### íƒ€ì… ì‘ì„± ê·œì¹™

**DO âœ“**
```typescript
// ëª…ì‹œì  ë°˜í™˜ íƒ€ì…
function searchBooks(params: SearchParams): Promise<SearchResponse> {
  // ...
}

// unknown ì‚¬ìš© (any ê¸ˆì§€)
function parseData(data: unknown): ParsedData {
  if (typeof data === 'object' && data !== null) {
    // type narrowing
  }
}

// ì¸í„°í˜ì´ìŠ¤ë¡œ êµ¬ì¡° ì •ì˜
interface LibraryStatus {
  libraryId: string
  libraryName: string
  libraryType: 'public' | 'smart' | 'education'
  hasBook: boolean
  isAvailable: boolean
  status: string
  dueDate: string | null
}
```

**DON'T âœ—**
```typescript
// any ì‚¬ìš© ê¸ˆì§€
function fetchData(url: any) { }  // âœ—

// ì•”ë¬µì  any
function handleClick(e) { }  // âœ—

// @ts-ignore ì‚¬ìš© ê¸ˆì§€
// @ts-ignore  // âœ—
const result = dangerousFunction()
```

---

## React 19 & Next.js 15 íŒ¨í„´

### Server Components ìš°ì„ 

**ê¸°ë³¸ ì›ì¹™**
- ëª¨ë“  ì»´í¬ë„ŒíŠ¸ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ Server Component
- ì¸í„°ë™ì…˜ì´ í•„ìš”í•  ë•Œë§Œ `'use client'` ì‚¬ìš©
- ë°ì´í„° í˜ì¹­ì€ Server Componentì—ì„œ

**DO âœ“**
```typescript
// app/(main)/results/page.tsx - Server Component
export default async function ResultsPage({ searchParams }) {
  // ì„œë²„ì—ì„œ ë°ì´í„° í˜ì¹­
  const data = await fetchSearchResults(searchParams)
  
  return (
    <main>
      <BookInfoCard data={data.book} />
      {/* í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ëŠ” í•„ìš”í•œ ë¶€ë¶„ë§Œ */}
      <LibraryListClient libraries={data.libraries} />
    </main>
  )
}

// components/library/library-list-client.tsx
'use client'

import { useState } from 'react'

export function LibraryListClient({ libraries }) {
  const [sortBy, setSortBy] = useState('distance')
  // í´ë¼ì´ì–¸íŠ¸ ìƒíƒœ ë° ì¸í„°ë™ì…˜ë§Œ
}
```

### Server Actions

**DO âœ“**
```typescript
// app/api/search/route.ts
'use server'

import { z } from 'zod'

const searchSchema = z.object({
  title: z.string().optional(),
  author: z.string().optional(),
  publisher: z.string().optional(),
})

export async function GET(request: NextRequest) {
  const { searchParams } = new URL(request.url)
  
  // ì…ë ¥ ê²€ì¦ í•„ìˆ˜ (ë³´ì•ˆ)
  const params = searchSchema.parse({
    title: searchParams.get('title'),
    author: searchParams.get('author'),
    publisher: searchParams.get('publisher'),
  })
  
  // Rate limiting
  const ip = request.headers.get('x-forwarded-for') || 'anonymous'
  const { success } = await ipRateLimit.limit(ip)
  if (!success) {
    return NextResponse.json({ error: 'ìš”ì²­ì´ ë„ˆë¬´ ë§ìŠµë‹ˆë‹¤.' }, { status: 429 })
  }
  
  // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
}

export const maxDuration = 60 // 60ì´ˆ íƒ€ì„ì•„ì›ƒ
```

### React 19 ì‹ ê·œ Hooks í™œìš©

**useActionState (í¼ ì²˜ë¦¬)**
```typescript
'use client'

import { useActionState } from 'react'

export function SearchForm() {
  const [state, formAction, isPending] = useActionState(searchAction, null)
  
  return (
    <form action={formAction}>
      <input name="title" placeholder="ì±… ì œëª©" />
      <button disabled={isPending}>
        {isPending ? 'ê²€ìƒ‰ ì¤‘...' : 'ê²€ìƒ‰í•˜ê¸°'}
      </button>
    </form>
  )
}
```

**useOptimistic (ë‚™ê´€ì  ì—…ë°ì´íŠ¸)**
```typescript
'use client'

import { useOptimistic } from 'react'

export function FavoriteButton({ libraryId, isFavorite }) {
  const [optimisticFavorite, addOptimistic] = useOptimistic(
    isFavorite,
    (state) => !state
  )
  
  return (
    <button onClick={() => addOptimistic()}>
      {optimisticFavorite ? 'â˜…' : 'â˜†'}
    </button>
  )
}
```

---

## ìŠ¤íƒ€ì¼ë§ (Tailwind CSS 4)

### ë””ìì¸ í† í° (CSS Variables)

```css
/* app/globals.css */
@layer theme {
  :root {
    /* Primary Green (ì†Œë‚˜ë¬´ ì´ˆë¡) */
    --color-primary: #2D7A4E;
    --color-primary-light: #4CAF6F;
    --color-primary-lighter: #E8F5E9;
    --color-primary-dark: #1B5E3A;
    
    /* Status Colors */
    --color-available-bg: #DCFCE7;
    --color-available-text: #15803D;
    --color-on-loan-bg: #FEE2E2;
    --color-on-loan-text: #B91C1C;
    
    /* Spacing (8px ê¸°ë°˜) */
    --space-1: 4px;
    --space-2: 8px;
    --space-4: 16px;
    --space-6: 24px;
    --space-8: 32px;
    
    /* Typography */
    --font-size-h1: 28px;
    --font-size-body: 16px;
    --line-height-relaxed: 1.6;
  }
}
```

### ì»´í¬ë„ŒíŠ¸ ìŠ¤íƒ€ì¼ë§ ê·œì¹™

**DO âœ“**
```typescript
// Tailwind ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤ ì‚¬ìš©
<button className="bg-primary text-white px-8 py-4 rounded-md font-semibold hover:bg-primary-dark transition-all">
  ê²€ìƒ‰í•˜ê¸°
</button>

// ì¬ì‚¬ìš© ì»´í¬ë„ŒíŠ¸ì—ì„œ cn() ìœ í‹¸ í™œìš©
import { cn } from '@/lib/utils/cn'

export function Button({ className, variant = 'primary', ...props }) {
  return (
    <button
      className={cn(
        'px-8 py-4 rounded-md font-semibold transition-all',
        variant === 'primary' && 'bg-primary text-white hover:bg-primary-dark',
        variant === 'secondary' && 'bg-transparent border border-gray-300',
        className
      )}
      {...props}
    />
  )
}
```

**DON'T âœ—**
```typescript
// arbitrary values ë‚¨ë°œ ê¸ˆì§€
<div className="mt-[17px] p-[23px]" /> // âœ—

// ì¸ë¼ì¸ ìŠ¤íƒ€ì¼ ì§€ì–‘
<div style={{ marginTop: '17px' }} /> // âœ—

// í…Œë§ˆ í† í° ë¬´ì‹œ ê¸ˆì§€
<div className="bg-[#FF0000]" /> // âœ— ëŒ€ì‹  ì •ì˜ëœ ìƒ‰ìƒ ì‚¬ìš©
```

### ë°˜ì‘í˜• ë””ìì¸ (ëª¨ë°”ì¼ ìš°ì„ )

```typescript
// ëª¨ë°”ì¼ â†’ íƒœë¸”ë¦¿ â†’ ë°ìŠ¤í¬í†± ìˆœì„œ
<div className="
  p-4                    // ëª¨ë°”ì¼ (ê¸°ë³¸)
  md:p-6                 // íƒœë¸”ë¦¿ (768px+)
  lg:p-8                 // ë°ìŠ¤í¬í†± (1024px+)
  max-w-screen-xl mx-auto
">
```

---

## ì ‘ê·¼ì„± (WCAG 2.1 AA ì¤€ìˆ˜)

### í•„ìˆ˜ ê·œì¹™

1. **ìƒ‰ìƒ ëŒ€ë¹„**
   - í…ìŠ¤íŠ¸: ìµœì†Œ 4.5:1
   - í° í…ìŠ¤íŠ¸ (18px+): ìµœì†Œ 3:1
   - UI ì»´í¬ë„ŒíŠ¸: ìµœì†Œ 3:1

2. **ìƒ‰ìƒì—ë§Œ ì˜ì¡´í•˜ì§€ ì•Šê¸°**
```typescript
// DO âœ“ - ìƒ‰ìƒ + ì•„ì´ì½˜ + í…ìŠ¤íŠ¸
<span className="badge-available">
  <CheckIcon />
  ëŒ€ì¶œê°€ëŠ¥
</span>

// DON'T âœ— - ìƒ‰ìƒë§Œìœ¼ë¡œ ì •ë³´ ì „ë‹¬
<span className="bg-green-500" /> // ë¬´ì—‡ì„ ì˜ë¯¸í•˜ëŠ”ì§€ ë¶ˆëª…í™•
```

3. **ì‹œë§¨í‹± HTML**
```typescript
// DO âœ“
<header>
  <h1>ì±…í¬</h1>
</header>
<main>
  <section aria-label="ë„ì„œ ê²€ìƒ‰">
    <h2>ê²€ìƒ‰</h2>
  </section>
</main>

// DON'T âœ—
<div className="header">
  <div className="title">ì±…í¬</div>
</div>
```

4. **í‚¤ë³´ë“œ ì ‘ê·¼ì„±**
   - ëª¨ë“  ì¸í„°ë™í‹°ë¸Œ ìš”ì†ŒëŠ” Tabìœ¼ë¡œ ì ‘ê·¼ ê°€ëŠ¥
   - í¬ì»¤ìŠ¤ í‘œì‹œ ëª…í™•íˆ (outline ì œê±° ê¸ˆì§€)
   - Enterë¡œ ë²„íŠ¼ ì‹¤í–‰, Escë¡œ ëª¨ë‹¬ ë‹«ê¸°

5. **í„°ì¹˜ íƒ€ê²Ÿ**
   - ìµœì†Œ 44x44px (ëª¨ë°”ì¼)
   - í„°ì¹˜ ìš”ì†Œ ê°„ ìµœì†Œ 8px ê°„ê²©

6. **ARIA ë ˆì´ë¸”**
```typescript
<button aria-label="ë„ì„œ ê²€ìƒ‰ ì‹¤í–‰">
  ğŸ” ê²€ìƒ‰í•˜ê¸°
</button>

<div role="status" aria-live="polite">
  ê²€ìƒ‰ ê²°ê³¼ 12ê°œë¥¼ ì°¾ì•˜ìŠµë‹ˆë‹¤
</div>

<img src="cover.jpg" alt="ë©‹ì§„ ì‹ ì„¸ê³„ í‘œì§€" />
```

7. **ë…¸ë…„ì¸µ ë°°ë ¤**
   - ìµœì†Œ í°íŠ¸ í¬ê¸°: 16px
   - í–‰ê°„: 1.5-1.6
   - ëª…í™•í•œ ë ˆì´ë¸”
   - ê°„ë‹¨í•œ ì¸í„°ë™ì…˜

---

## ì„±ëŠ¥ ìµœì í™”

### ì´ë¯¸ì§€ ìµœì í™”

```typescript
// DO âœ“ - next/image ì‚¬ìš©
import Image from 'next/image'

<Image
  src="/images/book-cover.jpg"
  alt="ë„ì„œ í‘œì§€"
  width={120}
  height={168}
  loading="lazy"
  placeholder="blur"
/>

// DON'T âœ— - img íƒœê·¸ ì§ì ‘ ì‚¬ìš©
<img src="/images/book-cover.jpg" /> // âœ—
```

### ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…

```typescript
// ë™ì  importë¡œ ë²ˆë“¤ í¬ê¸° ê°ì†Œ
import dynamic from 'next/dynamic'

const KakaoMap = dynamic(
  () => import('@/components/map/kakao-map'),
  {
    loading: () => <div>ì§€ë„ ë¡œë”© ì¤‘...</div>,
    ssr: false, // í´ë¼ì´ì–¸íŠ¸ì—ì„œë§Œ ë Œë”ë§
  }
)
```

### ìºì‹± ì „ëµ

```typescript
// lib/cache/redis.ts
import { Redis } from '@upstash/redis'

export const redis = Redis.fromEnv()

export const CACHE_TTL = {
  SEARCH_RESULT: 5 * 60,        // 5ë¶„ (ì‹¤ì‹œê°„ì„± ìœ ì§€)
  LIBRARY_LIST: 24 * 60 * 60,   // 24ì‹œê°„
  BOOK_INFO: 7 * 24 * 60 * 60,  // 7ì¼
}

// ìºì‹œ í‚¤ íŒ¨í„´
export function getCacheKey(type: string, ...params: string[]): string {
  return `${type}:${params.join(':')}`
}
```

### Streaming SSR

```typescript
// app/(main)/results/loading.tsx
export default function Loading() {
  return (
    <div className="space-y-4">
      {/* ìŠ¤ì¼ˆë ˆí†¤ UI */}
      <div className="animate-pulse h-40 bg-gray-200 rounded-lg" />
    </div>
  )
}
```

---

## ì›¹ í¬ë¡¤ë§ (Cheerio)

### ê¸°ë³¸ ì›ì¹™
- **Cheerio ì‚¬ìš©**: Puppeteer ëŒ€ì‹  (50ë°° ì´ìƒ ë¹ ë¦„, ë©”ëª¨ë¦¬ íš¨ìœ¨ì )
- **Rate Limiting**: ë„ì„œê´€ ì„œë²„ ë¶€í•˜ ìµœì†Œí™”
- **ì—ëŸ¬ í•¸ë“¤ë§**: ì¬ì‹œë„ ë¡œì§ í•„ìˆ˜
- **íƒ€ì„ì•„ì›ƒ**: 10ì´ˆ ì œí•œ

### í¬ë¡¤ë§ êµ¬í˜„

```typescript
// lib/scraper/songpa-unified.ts
import * as cheerio from 'cheerio'

export async function scrapeSongpaUnified(params: SearchParams) {
  const { title, author, publisher } = params
  
  // URL ìƒì„±
  const searchUrl = new URL('https://www.splibrary.or.kr/search/searchResult.do')
  if (title) searchUrl.searchParams.set('q', title)
  
  // Fetch with retry
  const response = await fetchWithRetry(searchUrl.toString(), {
    headers: {
      'User-Agent': 'Mozilla/5.0 (compatible; CheokBot/1.0)',
    },
  })
  
  const html = await response.text()
  const $ = cheerio.load(html)
  
  // ë„ì„œ ì •ë³´ ì¶”ì¶œ
  const bookInfo = {
    title: $('.book-title').first().text().trim(),
    author: $('.book-author').first().text().trim(),
    // ...
  }
  
  // ë„ì„œê´€ë³„ ì†Œì¥ ì •ë³´
  const libraries: LibraryStatus[] = []
  $('.library-status-row').each((i, el) => {
    const $row = $(el)
    libraries.push({
      libraryId: $row.data('library-id'),
      libraryName: $row.find('.library-name').text().trim(),
      hasBook: $row.find('.has-book').length > 0,
      isAvailable: $row.find('.status-available').length > 0,
      // ...
    })
  })
  
  return { book: bookInfo, libraries }
}

// ì¬ì‹œë„ ë¡œì§
async function fetchWithRetry(url: string, options = {}, maxRetries = 3) {
  for (let i = 0; i < maxRetries; i++) {
    try {
      const response = await fetch(url, {
        ...options,
        signal: AbortSignal.timeout(10000), // 10ì´ˆ
      })
      if (response.ok) return response
      
      // 429 Too Many Requests - ë°±ì˜¤í”„
      if (response.status === 429) {
        const delay = Math.pow(2, i) * 1000
        await new Promise(resolve => setTimeout(resolve, delay))
        continue
      }
    } catch (error) {
      if (i === maxRetries - 1) throw error
      await new Promise(resolve => setTimeout(resolve, 1000))
    }
  }
  throw new Error('Max retries exceeded')
}
```

---

## ë³´ì•ˆ

### í™˜ê²½ ë³€ìˆ˜

```bash
# .env.example
UPSTASH_REDIS_REST_URL=
UPSTASH_REDIS_REST_TOKEN=
NEXT_PUBLIC_KAKAO_MAP_KEY=
NODE_ENV=development
```

```typescript
// lib/env.ts - í™˜ê²½ ë³€ìˆ˜ ê²€ì¦
import { z } from 'zod'

const envSchema = z.object({
  UPSTASH_REDIS_REST_URL: z.string().url(),
  UPSTASH_REDIS_REST_TOKEN: z.string().min(1),
  NODE_ENV: z.enum(['development', 'production', 'test']),
})

export const env = envSchema.parse(process.env)
```

### Rate Limiting

```typescript
// lib/rate-limit.ts
import { Ratelimit } from '@upstash/ratelimit'
import { redis } from './cache/redis'

export const ipRateLimit = new Ratelimit({
  redis,
  limiter: Ratelimit.slidingWindow(10, '1 m'), // 1ë¶„ì— 10íšŒ
  analytics: true,
})
```

### Input Sanitization

```typescript
// lib/utils/validation.ts
import DOMPurify from 'isomorphic-dompurify'

export function sanitizeInput(input: string): string {
  return DOMPurify.sanitize(input, {
    ALLOWED_TAGS: [],
    ALLOWED_ATTR: [],
  })
}
```

---

## ë„ë©”ì¸ íƒ€ì… ì •ì˜

### í•µì‹¬ íƒ€ì…

```typescript
// types/library.ts
export type LibraryType = 'public' | 'smart' | 'education'

export interface Library {
  id: string
  name: string
  type: LibraryType
  address: string
  phone: string
  hours: string
  url: string
  lat: number
  lng: number
}

export interface LibraryStatus extends Library {
  hasBook: boolean
  isAvailable: boolean
  status: 'available' | 'on-loan' | 'in-library-only'
  dueDate: string | null
  location: string
  callNumber: string
  distance?: number
}

// types/book.ts
export interface BookInfo {
  title: string
  author: string
  publisher: string
  year: string
  isbn: string
  cover: string
  description: string
}

// types/search.ts
export interface SearchParams {
  title?: string
  author?: string
  publisher?: string
}

export interface SearchResponse {
  book: BookInfo
  libraries: LibraryStatus[]
}
```

---

## ì»¤ìŠ¤í…€ í›… íŒ¨í„´

```typescript
// lib/hooks/use-search.ts
import { useQuery } from '@tanstack/react-query'

export function useSearchQuery(params: SearchParams) {
  return useQuery({
    queryKey: ['search', params],
    queryFn: async () => {
      const query = new URLSearchParams()
      if (params.title) query.set('title', params.title)
      if (params.author) query.set('author', params.author)
      if (params.publisher) query.set('publisher', params.publisher)
      
      const res = await fetch(`/api/search?${query}`)
      if (!res.ok) throw new Error('ê²€ìƒ‰ ì‹¤íŒ¨')
      return res.json() as Promise<SearchResponse>
    },
    enabled: !!(params.title || params.author || params.publisher),
    staleTime: 5 * 60 * 1000, // 5ë¶„
  })
}
```

---

## ì—ëŸ¬ ì²˜ë¦¬

### ì—ëŸ¬ ë°”ìš´ë”ë¦¬

```typescript
// app/error.tsx
'use client'

export default function Error({
  error,
  reset,
}: {
  error: Error & { digest?: string }
  reset: () => void
}) {
  return (
    <div className="flex flex-col items-center justify-center min-h-screen">
      <h2 className="text-2xl font-bold mb-4">ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤</h2>
      <p className="text-gray-600 mb-8">{error.message}</p>
      <button
        onClick={reset}
        className="btn-primary"
      >
        ë‹¤ì‹œ ì‹œë„
      </button>
    </div>
  )
}
```

### API ì—ëŸ¬ ì‘ë‹µ

```typescript
// app/api/search/route.ts
export async function GET(request: NextRequest) {
  try {
    // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
  } catch (error) {
    console.error('Search error:', error)
    
    if (error instanceof z.ZodError) {
      return NextResponse.json(
        { error: 'ì˜ëª»ëœ ìš”ì²­ì…ë‹ˆë‹¤', details: error.errors },
        { status: 400 }
      )
    }
    
    return NextResponse.json(
      { error: 'ê²€ìƒ‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤' },
      { status: 500 }
    )
  }
}
```

---

## í…ŒìŠ¤íŒ… (í–¥í›„ í™•ì¥)

### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
```typescript
// lib/utils/__tests__/format.test.ts
import { formatDistance } from '../format'

describe('formatDistance', () => {
  it('should format distance in km', () => {
    expect(formatDistance(1234)).toBe('1.2km')
  })
})
```

---

## Git Commit ì»¨ë²¤ì…˜

```
feat: ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€
fix: ë²„ê·¸ ìˆ˜ì •
docs: ë¬¸ì„œ ìˆ˜ì •
style: ì½”ë“œ í¬ë§·íŒ… (ê¸°ëŠ¥ ë³€ê²½ ì—†ìŒ)
refactor: ë¦¬íŒ©í† ë§
test: í…ŒìŠ¤íŠ¸ ì¶”ê°€/ìˆ˜ì •
chore: ë¹Œë“œ ì„¤ì •, íŒ¨í‚¤ì§€ ì—…ë°ì´íŠ¸
```

**ì˜ˆì‹œ**
```
feat: ë„ì„œê´€ ì¹´ë“œ ì»´í¬ë„ŒíŠ¸ ì¶”ê°€
fix: ê²€ìƒ‰ ê²°ê³¼ ì •ë ¬ ì˜¤ë¥˜ ìˆ˜ì •
docs: READMEì— ì„¤ì¹˜ ë°©ë²• ì¶”ê°€
```

---

## ì²´í¬ë¦¬ìŠ¤íŠ¸

### ìƒˆë¡œìš´ ì»´í¬ë„ŒíŠ¸ ì‘ì„± ì‹œ
- [ ] Server Componentì¸ì§€ Client Componentì¸ì§€ ê²°ì •
- [ ] TypeScript íƒ€ì… ì •ì˜ (Props, ë°˜í™˜ íƒ€ì…)
- [ ] ì ‘ê·¼ì„± ê³ ë ¤ (ARIA, ì‹œë§¨í‹± HTML)
- [ ] Tailwind CSS ë””ìì¸ í† í° ì‚¬ìš©
- [ ] ë°˜ì‘í˜• ë””ìì¸ (ëª¨ë°”ì¼ ìš°ì„ )
- [ ] ì—ëŸ¬ ë°”ìš´ë”ë¦¬ ê³ ë ¤
- [ ] ë¡œë”© ìƒíƒœ ì²˜ë¦¬

### API Route ì‘ì„± ì‹œ
- [ ] ì…ë ¥ ê²€ì¦ (Zod ìŠ¤í‚¤ë§ˆ)
- [ ] Rate limiting ì ìš©
- [ ] ì—ëŸ¬ í•¸ë“¤ë§
- [ ] ìºì‹± ì „ëµ (Redis)
- [ ] maxDuration ì„¤ì •
- [ ] CORS í—¤ë” (í•„ìš”ì‹œ)

### í¬ë¡¤ë§ ë¡œì§ ì‘ì„± ì‹œ
- [ ] Cheerio ì‚¬ìš© (Puppeteer ê¸ˆì§€)
- [ ] ì¬ì‹œë„ ë¡œì§
- [ ] íƒ€ì„ì•„ì›ƒ ì„¤ì •
- [ ] User-Agent ì„¤ì •
- [ ] Rate limiting ì¤€ìˆ˜
- [ ] ì—ëŸ¬ í•¸ë“¤ë§

---

## ê¸ˆì§€ ì‚¬í•­

### ì ˆëŒ€ í•˜ì§€ ë§ ê²ƒ âœ—
1. `any` íƒ€ì… ì‚¬ìš©
2. `@ts-ignore` ì£¼ì„
3. í™˜ê²½ ë³€ìˆ˜ í•˜ë“œì½”ë”©
4. ì¸ë¼ì¸ ìŠ¤íƒ€ì¼ (Tailwind ëŒ€ì‹ )
5. Puppeteer ì‚¬ìš© (Cheerio ì‚¬ìš©)
6. console.log í”„ë¡œë•ì…˜ ì½”ë“œì— ë‚¨ê¸°ê¸°
7. ì ‘ê·¼ì„± ë¬´ì‹œ (outline: none)
8. íŒ¨ì¹˜ë˜ì§€ ì•Šì€ React/Next.js ë²„ì „
9. ìƒ‰ìƒë§Œìœ¼ë¡œ ì •ë³´ ì „ë‹¬
10. 16px ë¯¸ë§Œ í°íŠ¸ í¬ê¸°

---

## ì°¸ê³  ë¬¸ì„œ

- [ì„œë¹„ìŠ¤ ê¸°íšì•ˆ](./docs/service-proposal.md)
- [ë””ìì¸ ê°€ì´ë“œ](./docs/design-guide.md)
- [ì™€ì´ì–´í”„ë ˆì„](./docs/wireframes.md)
- [ì½”ë“œ ì•„í‚¤í…ì²˜](./docs/code-architecture.md)
- [Next.js 15 ë¬¸ì„œ](https://nextjs.org/docs)
- [React 19 ë¬¸ì„œ](https://react.dev)
- [Tailwind CSS 4 ë¬¸ì„œ](https://tailwindcss.com)

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2026-01-22  
**ë²„ì „**: 1.0.0
